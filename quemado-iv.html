<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Paciente Quemado ‚Äì Sueros IV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background:#f2f2f2;
  margin:0;
  padding:20px;
  text-align:center;
}

.container {
  max-width:420px;
  margin:0 auto;
  background:#ffffff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 8px rgba(0,0,0,0.1);
  text-align:left;
}

h1 {
  font-size:22px;
  margin-bottom:8px;
  text-align:center;
}

p {
  text-align:center;
  color:#555;
  font-size:14px;
  margin-bottom:16px;
}

.menu-btn {
  width:100%;
  padding:16px;
  margin:12px 0;
  font-size:17px;
  border-radius:14px;
  border:none;
  background:#ffffff;
  box-shadow:0 3px 6px rgba(0,0,0,0.15);
  cursor:pointer;
}

.menu-btn:active {
  transform:translateY(2px);
}

.warn-btn {
  background:#fff3cd;
  color:#856404;
  font-weight:bold;
}

.back-btn {
  width:100%;
  margin-top:20px;
  padding:12px;
  font-size:16px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  background:#1976d2;
  color:white;
}

/* Popup */
.popup {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  align-items:center;
  justify-content:center;
}

.popup-content {
  background:white;
  max-width:420px;
  width:90%;
  padding:20px;
  border-radius:12px;
  text-align:left;

  /* Scroll en PC/pantallas chicas */
  max-height: 85vh;
  overflow-y: auto;
}

.close-btn {
  margin-top:15px;
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#1976d2;
  color:white;
  cursor:pointer;
}

/* Resultado %SCQ */
.scq-result {
  text-align:center;
  font-size:16px;
  color:#111;
  margin-top:12px;
  padding:10px;
  background:#f5f5f5;
  border-radius:10px;
}

/* Sem√°foro */
.decision-box {
  text-align:center;
  margin-top:12px;
  padding:12px;
  border-radius:10px;
  border: 1px solid rgba(0,0,0,0.08);
}

.decision-red {
  background:#f8d7da;
  border-color:#f5c2c7;
}
.decision-yellow {
  background:#fff3cd;
  border-color:#ffecb5;
}

.decision-msg {
  font-weight:bold;
  color:#111;
  margin-bottom:10px;
}
.decision-note {
  font-size:12px;
  color:#555;
  margin-top:8px;
  line-height:1.3;
  text-align:center;
}

.action-red {
  background:#dc3545;
}
.action-yellow {
  background:#f0ad4e;
  color:#111;
}
</style>
</head>

<body>
<div class="container">
  <h1>üî• Paciente Quemado</h1>
  <p>Evaluaci√≥n inicial y manejo con l√≠quidos IV</p>

  <button class="menu-btn warn-btn" onclick="openPopup('advertencias')">‚ö†Ô∏è ADVERTENCIAS IMPORTANTES</button>

  <button class="menu-btn" onclick="openPopup('scq')">üßÆ Superficie corporal quemada</button>

  <!-- Parkland: SIEMPRE navega a parkland.html -->
  <button class="menu-btn" id="parklandBtn" onclick="goToParkland()">üíß Calculadora de l√≠quidos (Parkland)</button>

  <button class="menu-btn" onclick="location.href='manejo-quemaduras.html'">ü©π Manejo de quemaduras</button>

  <button class="back-btn" onclick="history.back()">‚¨Ö Volver</button>
</div>

<!-- Advertencias -->
<div class="popup" id="advertencias">
  <div class="popup-content">
    <h3>‚ö†Ô∏è Advertencias</h3>
    <ul>
      <li>No retirar ropa adherida a la piel</li>
      <li>No aplicar pomadas, aceites ni remedios caseros</li>
      <li>Enfriar con agua limpia solo los primeros minutos</li>
      <li>Buscar acceso venoso temprano</li>
      <li>Si no hay vena disponible, trasladar de inmediato</li>
    </ul>
    <button class="close-btn" onclick="closePopup('advertencias')">Cerrar</button>
  </div>
</div>

<!-- Superficie corporal quemada -->
<div class="popup" id="scq">
  <div class="popup-content">
    <h3>üßÆ Superficie corporal quemada</h3>
    <p>Selecciona las zonas afectadas (Regla del 9)</p>

    <label><input type="checkbox" class="scq-zone" data-pct="9"> Cabeza (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Brazo derecho (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Brazo izquierdo (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="18"> Tronco anterior (18%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="18"> Tronco posterior (18%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Pierna derecha anterior (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Pierna derecha posterior (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Pierna izquierda anterior (9%)</label><br>
    <label><input type="checkbox" class="scq-zone" data-pct="9"> Pierna izquierda posterior (9%)</label><br>

    <p><strong>Grado de profundidad:</strong></p>
    <select id="burnDepth" style="width:100%; padding:8px;">
      <option>Primer grado</option>
      <option>Segundo grado</option>
      <option>Tercer grado</option>
    </select>

    <div class="scq-result">
      %SCQ total: <strong><span id="scqTotal">0</span>%</strong>
    </div>

    <div class="decision-box decision-yellow" id="decisionBox">
      <div class="decision-msg" id="scqDecisionMsg">Selecciona zonas y profundidad.</div>
      <button class="close-btn action-yellow" id="scqDecisionBtn" onclick="decisionAction()">Continuar</button>
      <div class="decision-note" id="scqDecisionNote">
        üü® Amarillo = manejo. üü• Rojo = hidrataci√≥n IV.
      </div>
    </div>

    <button class="close-btn" onclick="closePopup('scq')">Cerrar</button>
  </div>
</div>

<script>
/* =========================
   CONFIG (tus criterios)
========================= */
const IV_THRESHOLD = 15;   // >15% en 2¬∫ o 3¬∫ => IV (ROJO)
const LOW_THRESHOLD = 10;  // <10% o 1¬∫ grado => manejo (AMARILLO)

/* =========================
   Estado
========================= */
let currentSCQ = 0;
let decisionTarget = 'manejo-quemaduras.html';

/* =========================
   Popups
========================= */
function openPopup(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.style.display = 'flex';

  // Reinicia SIEMPRE al abrir el SCQ (para evitar valores pegados)
  if (id === 'scq') resetSCQ();
}

function closePopup(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.style.display = 'none';
}

/* =========================
   SCQ: reset + c√°lculo
========================= */
function resetSCQ() {
  currentSCQ = 0;
  document.querySelectorAll('.scq-zone').forEach(cb => cb.checked = false);

  const depthEl = document.getElementById('burnDepth');
  if (depthEl) depthEl.value = 'Primer grado';

  const out = document.getElementById('scqTotal');
  if (out) out.textContent = '0';

  updateDecision();
}

function calculateSCQ() {
  let sum = 0;
  document.querySelectorAll('.scq-zone:checked').forEach(cb => {
    sum += parseFloat(cb.dataset.pct) || 0;
  });

  if (sum < 0) sum = 0;
  if (sum > 100) sum = 100;

  currentSCQ = sum;

  const out = document.getElementById('scqTotal');
  if (out) out.textContent = String(sum);

  updateDecision();
}

/* =========================
   Sem√°foro + decisi√≥n
========================= */
function setSemaforo(isRed) {
  const box = document.getElementById('decisionBox');
  const btn = document.getElementById('scqDecisionBtn');
  if (!box || !btn) return;

  if (isRed) {
    box.classList.remove('decision-yellow');
    box.classList.add('decision-red');
    btn.classList.remove('action-yellow');
    btn.classList.add('action-red');
  } else {
    box.classList.remove('decision-red');
    box.classList.add('decision-yellow');
    btn.classList.remove('action-red');
    btn.classList.add('action-yellow');
  }
}

function updateDecision() {
  const depthEl = document.getElementById('burnDepth');
  const depth = depthEl ? depthEl.value : 'Primer grado';

  const msgEl = document.getElementById('scqDecisionMsg');
  const btnEl = document.getElementById('scqDecisionBtn');
  const noteEl = document.getElementById('scqDecisionNote');
  if (!msgEl || !btnEl) return;

  const isFirst = (depth === 'Primer grado');
  const isSecond = (depth === 'Segundo grado');
  const isThird = (depth === 'Tercer grado');

  // üü• ROJO: >15% y 2¬∫ o 3¬∫
  if ((currentSCQ > IV_THRESHOLD) && (isSecond || isThird)) {
    setSemaforo(true);
    msgEl.textContent = 'üü• ROJO: Requiere hidrataci√≥n IV';
    btnEl.textContent = 'Ir a Parkland';
    decisionTarget = 'parkland.html';
    if (noteEl) noteEl.textContent = 'Criterio: >15% y 2¬∫/3¬∫ grado.';
    return;
  }

  // üü® AMARILLO: <10% o 1¬∫ grado
  if (currentSCQ < LOW_THRESHOLD || isFirst) {
    setSemaforo(false);
    msgEl.textContent = 'üü® AMARILLO: Manejo de quemaduras';
    btnEl.textContent = 'Ir a Manejo';
    decisionTarget = 'manejo-quemaduras.html';
    if (noteEl) noteEl.textContent = 'Criterio: <10% o 1¬∫ grado.';
    return;
  }

  // Intermedio (10‚Äì15% en 2¬∫ grado): AMARILLO por defecto (manejo/valorar)
  setSemaforo(false);
  msgEl.textContent = 'üü® AMARILLO: Manejo / valorar traslado';
  btnEl.textContent = 'Ir a Manejo';
  decisionTarget = 'manejo-quemaduras.html';
  if (noteEl) noteEl.textContent = 'Entre 10‚Äì15%: vigilar, analgesia, curaci√≥n, y valorar traslado seg√∫n zona/estado.';
}

/* =========================
   Acciones botones
========================= */
function decisionAction() {
  location.href = decisionTarget;
}

function goToParkland() {
  location.href = 'parkland.html';
}

/* =========================
   Listeners
========================= */
document.addEventListener('change', (e) => {
  if (e.target && e.target.classList.contains('scq-zone')) calculateSCQ();
  if (e.target && e.target.id === 'burnDepth') updateDecision();
});

// Inicializa sem√°foro en pantalla (por si abre sin tocar nada)
updateDecision();
</script>

</body>
</html>
